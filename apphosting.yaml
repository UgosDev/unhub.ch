# Specifica la versione di Node.js da utilizzare
runtime: nodejs20

# Espone il segreto 'api_key' come variabile d'ambiente API_KEY
env:
  - variable: API_KEY
    secret: api_key

# Build process semplificato: installa dipendenze, build con Vite, inietta API key
build: |
  npm ci
  npm run build
  node replace.js

# Serve l'applicazione compilata dalla cartella dist
run: npm start

# Configurazione SPA routing
serving:
  rewrites:
    - source: /.*
      destination: /index.html