<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/icon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json" crossorigin="use-credentials" />
  <meta name="theme-color" content="#9e5bfe" />
  <link rel="apple-touch-icon" href="/icon.svg" />

  <title>scansioni.ch</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" rel="stylesheet" />

  <!-- Anti-FOUC (tema) -->
  <script>
    (function () {
      const pref = localStorage.getItem('theme') || 'system';
      const dark = matchMedia('(prefers-color-scheme: dark)').matches;
      document.documentElement.classList.toggle('dark', pref === 'dark' || (pref === 'system' && dark));
    })();
  </script>

  <!-- Lib esterne async -->
  <script async src="https://docs.opencv.org/4.x/opencv.js" onload="dispatchEvent(new CustomEvent('opencv-ready'))"></script>
  <script async defer src="https://accounts.google.com/gsi/client"></script>
  <script async defer src="https://apis.google.com/js/api.js" onload="dispatchEvent(new CustomEvent('gapi-ready'))"></script>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-E4SMRP3VWB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-E4SMRP3VWB');
  </script>

  <style>
    html{scroll-behavior:smooth}
    body{
      font-family:'Plus Jakarta Sans',sans-serif;
      background-image:
        linear-gradient(rgba(168,85,247,.04)1px,transparent 1px),
        linear-gradient(90deg,rgba(168,85,247,.04)1px,transparent 1px);
      background-size:40px 40px;
      background-attachment:fixed;
    }
    .material-symbols-outlined {
      font-family: 'Material Symbols Outlined';
      font-weight: normal;
      font-style: normal;
      font-size: 24px;
      line-height: 1;
      letter-spacing: normal;
      text-transform: none;
      display: inline-block;
      white-space: nowrap;
      word-wrap: normal;
      direction: ltr;
      -webkit-font-feature-settings: 'liga';
      -webkit-font-smoothing: antialiased;
      vertical-align: middle;
      user-select: none;
    }
    @keyframes highlight-pulse {
      0%, 100% { background-color: transparent; box-shadow: 0 0 0 0 rgba(168,85,247,.4); }
      50% { background-color: rgba(168,85,247,.1); box-shadow: 0 0 0 15px rgba(168,85,247,0); }
    }
    .highlight-section-animation { animation: highlight-pulse 2.5s ease-in-out; }

    /* --- Scanner BG & lines (per WaitlistPage di scansioni.ch) --- */
    .waitlist-bg-grid{
      position:absolute; inset:0; pointer-events:none; opacity:.2;
      background-image:
        linear-gradient(to right, rgba(255,255,255,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.06) 1px, transparent 1px);
      background-size:24px 24px;
    }
    @keyframes scan-down{
      0%{ top:-10%; opacity:0 }
      10%{ opacity:1 }
      90%{ opacity:1 }
      100%{ top:110%; opacity:0 }
    }
    .scanner-line{
      position:absolute; left:0; right:0; height:2px; top:-10%;
      pointer-events:none; mix-blend-mode:screen;
      background:linear-gradient(90deg, rgba(0,255,255,0), rgba(0,255,255,.9), rgba(0,255,255,0));
      box-shadow:0 0 10px rgba(0,255,255,.7), 0 0 22px rgba(0,255,255,.35);
      animation:scan-down 6.5s linear infinite;
    }
    .scanner-line.line1{ animation-duration:5.2s; animation-delay:0s }
    .scanner-line.line2{ animation-duration:7.1s; animation-delay:.9s }
    .scanner-line.line3{ animation-duration:6.3s; animation-delay:1.8s }
    .scanner-line.line4{ animation-duration:8s;   animation-delay:2.7s }

    .mouse-scanner-line{
      position:absolute; left:0; width:100%; height:1px; opacity:0;
      pointer-events:none; will-change:transform,opacity; transition:opacity .2s ease;
      background:linear-gradient(90deg, rgba(0,255,255,0), rgba(0,255,255,.8), rgba(0,255,255,0));
      box-shadow:0 0 8px rgba(0,255,255,.6), 0 0 18px rgba(0,255,255,.3);
      mix-blend-mode:screen;
    }

    /* Shimmer del bottone */
    @keyframes shimmer{ 0%{transform:translateX(-120%)} 100%{transform:translateX(120%)} }
    .shimmer-effect{
      position:absolute; inset:0; transform:translateX(-120%);
      background:linear-gradient(120deg, transparent, rgba(255,255,255,.35), transparent);
      animation:shimmer 2.4s infinite; pointer-events:none;
    }

    /* Shake del form */
    @keyframes shake {
      10%,90%{ transform:translateX(-1px) }
      20%,80%{ transform:translateX( 2px) }
      30%,50%,70%{ transform:translateX(-4px) }
      40%,60%{ transform:translateX( 4px) }
    }
    .animate-shake{ animation:shake .45s cubic-bezier(.36,.07,.19,.97) both }
    
    /* Toast Animations */
    @keyframes toast-in {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes toast-out {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }
    .animate-toast-in { animation: toast-in 0.5s ease-out forwards; }
    .animate-toast-out { animation: toast-out 0.5s ease-out forwards; }

    /* Donation Banner Animation */
    @keyframes fade-in-up {
      from { opacity: 0; transform: translateY(100%); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in-up { animation: fade-in-up 0.5s ease-out forwards; }
    
    /* --- NUOVO: Stile per feedback su elemento --- */
    .feedback-highlight-target {
      outline: 3px dashed #a855f7 !important; /* purple-500 */
      outline-offset: 3px !important;
      transition: outline 0.1s ease-in-out;
      cursor: crosshair !important;
      border-radius: 4px;
    }

    /* --- NUOVO: Cursore lampeggiante per chatbot --- */
    @keyframes blink {
      50% { opacity: 0; }
    }
    .blinking-cursor {
      display: inline-block;
      width: 8px;
      height: 1em;
      background-color: currentColor;
      animation: blink 1s step-end infinite;
      vertical-align: text-bottom;
      margin-left: 2px;
    }

    /* --- NUOVO: Stile per UnHubPage (Split-Screen) --- */
    .unhub-split-container {
        display: flex;
        width: 100vw;
        height: 100vh;
        background-color: #020617; /* slate-950 */
        overflow: hidden;
        color: white;
    }
    #unhub-canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        opacity: 0.5;
    }
    .unhub-panel {
        flex: 1 1 50%;
        padding: 4rem 2rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        transition: all 0.7s cubic-bezier(0.25, 1, 0.5, 1);
        position: relative;
        z-index: 1;
        overflow: hidden;
        border-style: solid;
        border-width: 0;
    }
    .unhub-panel::before {
        content: '';
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        z-index: -1;
        opacity: 0.1;
        transition: opacity 0.7s ease;
    }

    .unhub-panel--consumer {
        --hub-color: #a855f7; /* purple-500 */
        border-right-width: 1px;
        border-color: rgba(255, 255, 255, 0.1);
    }
    .unhub-panel--consumer::before {
        background: radial-gradient(circle at 25% 50%, var(--hub-color) 0%, transparent 70%);
    }

    .unhub-panel--pro {
        --hub-color: #06b6d4; /* cyan-500 */
    }
    .unhub-panel--pro::before {
        background: radial-gradient(circle at 75% 50%, var(--hub-color) 0%, transparent 70%);
    }

    .unhub-split-container.hover-consumer .unhub-panel--consumer { flex-basis: 60%; }
    .unhub-split-container.hover-consumer .unhub-panel--pro { flex-basis: 40%; filter: brightness(0.7); }
    .unhub-split-container.hover-consumer .unhub-panel--consumer::before { opacity: 0.25; }

    .unhub-split-container.hover-pro .unhub-panel--pro { flex-basis: 60%; }
    .unhub-split-container.hover-pro .unhub-panel--consumer { flex-basis: 40%; filter: brightness(0.7); }
    .unhub-split-container.hover-pro .unhub-panel--pro::before { opacity: 0.25; }

    .unhub-panel-content {
        transition: transform 0.7s cubic-bezier(0.25, 1, 0.5, 1);
    }

    .unhub-split-container.hover-consumer .unhub-panel--consumer .unhub-panel-content,
    .unhub-split-container.hover-pro .unhub-panel--pro .unhub-panel-content {
        transform: scale(1.05);
    }
    
    .unhub-service-list {
        margin-top: 2.5rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.25rem;
    }
    .unhub-service-link {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 1.125rem;
        font-weight: 700;
        color: #d1d5db; /* gray-300 */
        text-decoration: none;
        transition: all 0.2s ease-in-out;
        padding: 0.5rem 1rem;
        border-radius: 9999px;
    }
    .unhub-service-link:hover {
        color: white;
        background-color: rgba(255, 255, 255, 0.05);
        transform: translateX(5px);
    }
    .unhub-service-link .unhub-icon {
        color: var(--hub-color);
        transition: transform 0.2s ease;
    }
    .unhub-service-link:hover .unhub-icon {
        transform: scale(1.2);
    }

    /* Riduzione animazioni se richiesto dall'utente */
    @media (prefers-reduced-motion: reduce){
      .scanner-line,.mouse-scanner-line,.shimmer-effect,.animate-shake,
      .animate-toast-in, .animate-toast-out, .animate-fade-in-up,
      .unhub-panel, .unhub-panel-content, .unhub-service-link,
      .blinking-cursor {
        animation:none !important; transition:none !important;
      }
      #unhub-canvas { display: none; }
    }
  </style>
</head>

<body class="bg-slate-50 dark:bg-slate-900">
  <noscript>Devi abilitare JavaScript per usare questo sito.</noscript>
  <div id="root"></div>

  <!-- Vite will inject the compiled JavaScript here -->
  <script type="module" src="/src/main.tsx"></script>
  
  <script>
    if ('serviceWorker' in navigator && !/usercontent.goog/.test(location.hostname)) {
      addEventListener('load', () => navigator.serviceWorker
        .register('/service-worker.js')
        .then(r => console.log('[SW] OK', r))
        .catch(e => console.log('[SW] KO', e)));
    }
  </script>
</body>
</html>